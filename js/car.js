"use strict";function showCart(){$.ajax({url:"../php/showlist.php",dataType:"json",success:function(t){$(".product-list>tbody").html("");for(var n=t.data,e="",c=0;c<n.length;c++)e+='<tr>\n                            <td><input type="checkbox" id="'.concat(n[c].product_id,'"></td>\n                            <td>\n                                <img src="').concat(n[c].product_img,'"/>\n                                <span>').concat(n[c].product_name,"</span>\n                            </td>\t\t\t\t\n                            <td>").concat(n[c].product_price,'</td>\n                            <td>\n                                <span class="cutBtn">-</span><span><input type="number" value="').concat(n[c].product_num,'"></span><span class="addBtn">+</span>\n                            </td>\n                            <td>').concat(n[c].product_price*n[c].product_num,'</td>\n                            <td>\n                                <span class="delBtn">删除</span>\n                            </td>\n                        </tr>');$(".product-list>tbody").html(e)}})}function tot(t){var n=Number(t.parent().find("input[type=number]").val())*Number(t.parent().prev().html());t.parent().next().html(n)}function numChange(t){var n=t.parent().find("input[type=number]").val(),e=t.parent().parent().find("input[type=checkbox]").attr("id");$.ajax({url:"../php/updatewq.php",data:{id:e,num:n},dataType:"json",success:function(t){t.code&&jiesuan()}})}function jiesuan(){var t=0,n=0;$("tbody").find("input[type=checkbox]").each(function(){$(this).prop("checked")?(t+=1,n+=Number($(this).parent().siblings().eq(3).html()),$(this).parent().parent().children().css("background","#fff8e1")):$(this).parent().parent().children().css("background","#fff")}),$(".count").html(t),$(".totMoney").html(n)}showCart(),$("tbody").on("click",".cutBtn",function(){var t=Number($(this).next().children().val());t=2<t?t-1:1,$(this).next().children().val(t.toString()),tot($(this)),numChange($(this)),jiesuan()}),$("tbody").on("click",".addBtn",function(){var t=Number($(this).prev().children().val())+1;$(this).prev().children().val(t.toString()),tot($(this)),numChange($(this)),jiesuan()}),$("tbody").on("keyup","input[type=number]",function(){tot($(this).parent()),numChange($(this).parent()),jiesuan()}),$("tbody").on("click",".delBtn",function(){var t=$(this).parent().parent().find("input[type=checkbox]").attr("id");$(this).parent().parent().remove(),$.ajax({url:"../php/delwq.php",data:{id:t},dataType:"json",success:function(t){t.code&&jiesuan()}})}),$("tbody").on("click","input[type=checkbox]",function(){$(this).prop("checked",this.checked),$(this).prop("checked")||$(".all").prop("checked",this.checked),jiesuan()}),$(".all").on("click",function(){$(".all").prop("checked",this.checked),$("tbody").find("input[type=checkbox]").prop("checked",this.checked),jiesuan()});